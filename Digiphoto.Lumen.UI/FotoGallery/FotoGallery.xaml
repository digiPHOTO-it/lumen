<lumM:UserControlBase x:Class="Digiphoto.Lumen.UI.FotoGallery"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:lum="clr-namespace:Digiphoto.Lumen.UI"
             xmlns:lumM="clr-namespace:Digiphoto.Lumen.UI.Mvvm"
             xmlns:lumMS="clr-namespace:Digiphoto.Lumen.UI.Mvvm.MultiSelect"
             xmlns:extToolkit="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit/extended"
             xmlns:lumC="clr-namespace:Digiphoto.Lumen.UI.Converters"
             xmlns:lumD="clr-namespace:Digiphoto.Lumen.UI.Diapo"         
             mc:Ignorable="d" 
             x:Name="this"
             d:DesignHeight="900" d:DesignWidth="1800" FontStretch="Condensed">


	<UserControl.Resources>
		<ResourceDictionary Source="FotoGalleryResources.xaml" />
	</UserControl.Resources>

    <DockPanel>

		<ToolBarTray DockPanel.Dock="Left" Orientation="Vertical" >

			<ToolBar>

				<Button Command="{Binding mandareInModificaCommand}" ToolTip="aggiunge alla lista delle foto da modificare" Style="{StaticResource buttonBaseStyle}" >
                    <Image Source="/Digiphoto.Lumen.UI;component/Resources/PhotoEdit-48x48.png" />
                </Button>
				
                <Separator />

				<Button Command="{Binding Path=aggiungereAlMasterizzatoreCommand}" ToolTip="Aggiungi al masterizzatore" Style="{StaticResource buttonBaseStyle}">
                    <Image Source="/Digiphoto.Lumen.UI;component/Resources/DvdBurn-48x48.png"  />
                </Button>
            </ToolBar>
            
			<ToolBar Name="stampaProvini" IsEnabled="{Binding Path=stampantiAbbinate, Converter={StaticResource listVisibilityConverter}}">
				<Button Command="{Binding Path=stampareProviniCommand}" ToolTip="Stampa provini" Style="{StaticResource buttonBaseStyle}">
                    <Image Source="/Digiphoto.Lumen.UI;component/Resources/Provini-48x48.png"  />
                </Button>            
            </ToolBar>
			
            <ToolBar Name="stampaToolBar" 
                     Header="Stampe"
                     ItemsSource="{Binding stampantiAbbinate}" 
                     ItemTemplate="{StaticResource pulsanteDiStampaTemplate}" >                
            </ToolBar>

        </ToolBarTray>

        <Expander DockPanel.Dock="Top" Header="Metadati da imporre" IsExpanded="False" ExpandDirection="Down">
            <Grid>
				<lum:SelettoreMetadatiView x:Name="selettoreMetadati" MyItemsSource="{Binding ElementName=this, Path=DataContext.fotografieCW}" />
            </Grid>
        </Expander>
        
        
        <Expander DockPanel.Dock="Right" Header="View" IsExpanded="True" ExpandDirection="Left">
            
            <ToolBarTray Name="toolBarTrayAzioniDx"  Orientation="Vertical">
                
                <ToolBar Band="1" BandIndex="1" >
					<Label Content="Gallery" />
                    <RadioButton Content="*" Tag="1" Style="{StaticResource {x:Type ToggleButton}}" Width="32" Checked="radioButtonQuanteNeVedo_Checked" />
                    <RadioButton Content="**" Tag="2" Style="{StaticResource {x:Type ToggleButton}}" Width="32"  Checked="radioButtonQuanteNeVedo_Checked" />
                    <RadioButton Content="***" Tag="4" Style="{StaticResource {x:Type ToggleButton}}" Width="32"  Checked="radioButtonQuanteNeVedo_Checked" />
                    <Slider Name="dimensioneIconeSlider" 
                            Minimum="32" Maximum="2000"
                            Orientation="Vertical" Height="50" 
                            Value="{Binding Path=dimensioneIconaFoto,Mode=TwoWay}"
                            HorizontalAlignment="Center" />
                    <Separator />
					<Button Content="+Selez" Command="{Binding selezionareTuttoCommand}" CommandParameter="True" Style="{StaticResource buttonBaseStyle}" />
					<Button Content="-Deselez" Command="{Binding selezionareTuttoCommand}" CommandParameter="False" Style="{StaticResource buttonBaseStyle}" />
                    <RadioButton Content="All"  Style="{StaticResource {x:Type ToggleButton}}"  Width="32" GroupName="vediSelezGrp" ToolTip="Vedi tutte le foto" Command="{Binding Path=filtrareSelezionateCommand}" CommandParameter="false" />
                    <RadioButton Content="Selez" Style="{StaticResource {x:Type ToggleButton}}"  Width="32" GroupName="vediSelezGrp" ToolTip="Vedi solo le foto selezionate" Command="{Binding Path=filtrareSelezionateCommand}" CommandParameter="true" />
                                      
                </ToolBar>

                <ToolBar Band="1" BandIndex="2" Header="Pubblico">
					<Button Content="Load" Command="{Binding caricareSlideShowCommand}" CommandParameter="Manual" Style="{StaticResource buttonBaseStyle}" />
					<ToggleButton Content="Start" Command="{Binding controllareSlideShowCommand}" CommandParameter="Start" Style="{StaticResource buttonBaseStyle}" />
					<ToggleButton Content="Stop"  Command="{Binding controllareSlideShowCommand}" CommandParameter="Stop" Style="{StaticResource buttonBaseStyle}" />
					<extToolkit:IntegerUpDown Minimum="1" Maximum="10" ToolTip="Num. righe Slide-Show" Value="{Binding numRigheSlideShow}" IsEnabled="{Binding possoControllareSlideShow}" />
					<extToolkit:IntegerUpDown Minimum="1" Maximum="10" ToolTip="Num. colonne Slide-Show" Value="{Binding numColonneSlideShow}" IsEnabled="{Binding possoControllareSlideShow}" />
                    <Separator />
					<Button Content="Svuota" Command="{Binding controllareSlideShowCommand}" CommandParameter="Reset" Style="{StaticResource buttonBaseStyle}" />
                </ToolBar>
            </ToolBarTray>
        </Expander>

        
        <Expander Header="Ricerca foto nell'archivio" DockPanel.Dock="Bottom" IsExpanded="True" ExpandDirection="Up" >
            
            <StackPanel Orientation="Horizontal" MaxHeight="120">
                
                <GroupBox Header="Tempo">

                    <StackPanel Orientation="Vertical">

						<DatePicker SelectedDate="{Binding Path=paramCercaFoto.giornataIniz,Mode=TwoWay}"  IsTodayHighlighted="true" Name="datePickerRicercaIniz" ToolTip="Data inizio periodo" Margin="1"/>
						<DatePicker SelectedDate="{Binding Path=paramCercaFoto.giornataFine,Mode=TwoWay}"  IsTodayHighlighted="true" Name="datePickerRicercaFine" ToolTip="Data fine periodo" Margin="1"/>

						<StackPanel Orientation="Horizontal" Margin="0,3,0,0" HorizontalAlignment="Center">
							<Button Content="Oggi" Name="oggiButton" Click="oggiButton_Click" Margin="1" Padding="2,0,2,0" MinWidth="40" />
							<Button Content="Ieri" Name="ieriButton" Click="ieriButton_Click" Margin="1" Padding="2,0,2,0" MinWidth="40" />
							<Button Content="Ieri+Oggi" Name="ieriOggiButton" Click="ieriOggiButton_Click" Margin="1" Padding="2,0,2,0" />
						</StackPanel>
					</StackPanel>
                </GroupBox>


                
                
                <!-- eventuale filtro per fotografo -->
                <lum:SelettoreFotografo x:Name="selettoreFotografo5" possoCreare="False"
										Margin="3,0,0,0"
                                        DataContext="{Binding selettoreFotografoViewModel}" />

                <lum:SelettoreEvento x:Name="selettoreEvento5" possoCreare="False"
									 Margin="3,0,0,0"
                                 DataContext="{Binding selettoreEventoFiltro}" />

				<StackPanel Orientation="Vertical" Margin="3,0,3,0" VerticalAlignment="Center">
                    <CheckBox Name="checkBoxMattino" Content="Mattino" IsChecked="{Binding isMattinoChecked,Mode=TwoWay}" Margin="2" />
					<CheckBox Name="checkBoxPomeriggio" Content="Pomeriggio" IsChecked="{Binding isPomeriggioChecked,Mode=TwoWay}" Margin="2" />
					<CheckBox Name="checkBoxSera" Content="Sera" IsChecked="{Binding isSeraChecked,Mode=TwoWay}" Margin="2" />              
				</StackPanel>

				<StackPanel Orientation="Vertical" Margin="3,0,3,0"  >

					<Label Content="Didascalia" />
					<TextBox Name="didascaliaTextBox" CharacterCasing="Upper" Text="{Binding Path=paramCercaFoto.didascalia,Mode=TwoWay}" MinWidth="80" />

                    <Separator />
                    
                    <Label>Numeri</Label>
					<TextBox  Text="{Binding Path=stringaNumeriFotogrammi}" 
							  Name="textBoxNumFotogrammi"
							  CharacterCasing="Upper" MinWidth="80"
							  ToolTip="Indicare i numeri separati da virgola , oppure range con il meno -" />
                </StackPanel>


				<StackPanel Orientation="Vertical" Margin="3,0,3,0"  >

					<StackPanel Orientation="Horizontal" Margin="2">
						<Button Name="eseguireRicercaButton" Command="{Binding eseguireRicercaCommand}" >
							<StackPanel Orientation="Horizontal">
								<Image Source="/Digiphoto.Lumen.UI;component/Resources/start-search-24x24.png" Height="24" />
								<Label Content="Esegui Ricerca" />
							</StackPanel>
						</Button>
						<Button Name="azzeraParamRicercaButton" ToolTip="Azzera i parametri di ricerca" Command="{Binding azzeraParamRicercaCommand}" >
							<StackPanel Orientation="Horizontal">
								<Image Source="/Digiphoto.Lumen.UI;component/Resources/clear-filter-22x22.png" Height="22" />
								<Label Content="Svuota filtri" />
							</StackPanel>
						</Button>



					</StackPanel>
					<StackPanel Orientation="Horizontal" Margin="2">
						<Button Content="|&lt;- Pag" ToolTip="Risultati prima pagina" Command="{Binding commandSpostarePaginazione}" CommandParameter="-999" />
						<Button Content="&lt;- Pag" ToolTip="Risultati pagina precedente" Command="{Binding commandSpostarePaginazione}" CommandParameter="-1" />
						<Button Content="Pag +&gt;" ToolTip="Risultati prossima pagina" Command="{Binding commandSpostarePaginazione}" CommandParameter="1" />
					</StackPanel>

				</StackPanel>


				<Button Name="caricareSlideShowAuto" Content="Load SS Auto" Command="{Binding caricareSlideShowCommand}" CommandParameter="Auto" />

			</StackPanel>


		</Expander>


		<lum:SelettoreAzioniRapideView Visibility="Collapsed" DataContext="{Binding Path=selettoreAzioniRapideViewModel}"/>
        
        <!-- Questa è la lista delle immagini -->
        <ListBox x:Name="LsImageGallery"  
                 SelectionMode="Multiple" 
                 lumMS:MultiSelect.IsEnabled="True" IsSynchronizedWithCurrentItem="True"
                 Style="{StaticResource LsImageGalleryStyle}"
                 ItemsSource="{Binding Path=fotografieCW}" 
                 ItemsPanel="{DynamicResource ImageGalleryItemsPanelTemplate}" 
                 ItemTemplate="{DynamicResource fotografiaDataTemplate}"
				 ContextMenu="{DynamicResource azioniRapideMenu}"
				 ScrollViewer.HorizontalScrollBarVisibility="Disabled" PreviewMouseRightButtonDown="LsImageGallery_PreviewMouseRightButtonDown">

                <ListBox.ItemContainerStyle>
                    <Style TargetType="{x:Type ListBoxItem}">
                    <EventSetter Event="MouseDoubleClick" Handler="listBoxItemImageGallery_MouseDoubleClick" />

						<Style.Resources>
							<!--SelectedItem with focus -->
							<SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Yellow" />

							<!--SelectedItem without focus-->
							<SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="Yellow" Opacity="70" />
						</Style.Resources>
                    </Style>
                </ListBox.ItemContainerStyle>
		</ListBox>

    </DockPanel>

</lumM:UserControlBase>