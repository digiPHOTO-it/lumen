<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:lumC="clr-namespace:Digiphoto.Lumen.UI.Converters"
                    >

    <lumC:ImmagineToImageSourceConverter x:Key="immagineToImageSourceConverter" />
    <lumC:PercentualeConverter x:Key="percentualeConverter" />

    <!-- Template per visualizzare ogni elemento della lista. In pratica ogni entità "Fotografia" -->
    <DataTemplate x:Key="fotografiaDataTemplate">

        <Border BorderBrush="WhiteSmoke" BorderThickness="1" CornerRadius="8" Margin="0,0,2,2" >

            <Canvas x:Name="fotoCanvas"
                    Height="{Binding ElementName=dimensioneIconeSlider,Path=Value}" 
                    Width="{Binding ElementName=dimensioneIconeSlider,Path=Value}">

                <Canvas.Background>
                    <ImageBrush ImageSource="{Binding Path=imgProvino,Converter={StaticResource immagineToImageSourceConverter}}" 
                                Stretch="Uniform" />
                </Canvas.Background>

                
<!-- TODO mettere una immagine per le info aggiuntive in popup -->
                
                <!-- IL font con cui stampo il numero, ha grandezza proporzionale al canvas . Per ora uso 8% della grandezza del contenitore della foto -->
                <Label Content="{Binding Path=etichetta}"        
                               Canvas.Right="2"
                               Canvas.Bottom="2"
                               FontSize="{Binding Converter={StaticResource percentualeConverter},ElementName=fotoCanvas,Path=ActualHeight,ConverterParameter=0.08}"
                               Background="Orange" />
            </Canvas>

        </Border>

    </DataTemplate>

    <!-- L'elemento selezionato della lista perde il colore quando non ha il fuoco. Con questo rimetto a posto -->
    <Style TargetType="ListBoxItem">
        <Style.Resources>
            <!--SelectedItem with focus -->
            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Red" />
            
            <!--SelectedItem without focus-->
            <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="Orange" Opacity=".6"/>
        </Style.Resources>
    </Style>
    
</ResourceDictionary>